<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Ali's Blog - Guestbook</title>
    <style>
        /* Your existing CSS, moved here for the sake of completeness */
        body {
            background-color: #FFCC99;
            font-family: "Times New Roman", Times, serif;
            color: #FF33CC;
        }
        .retro-btn {
            background-color: #FF66FF;
            border: 2px outset #FFCCFF;
            font-family: Arial, sans-serif;
            padding: 5px 15px;
            text-decoration: none;
            color: #000000;
        }
        .retro-btn:hover {
            background-color: #FF99FF;
        }
    </style>
</head>

<body>
    <center>
        <marquee><font face="Comic Sans MS" size="7" color="black"><blink>Ali's Blog - Guestbook</blink></font></marquee>
    </center>
    <hr>

    <center>
        <form id="guestbookForm">
            <input type="text" id="username" placeholder="Your Name"><br>
            <textarea id="message" rows="4" cols="50" placeholder="Write your message here"></textarea><br>
            <input type="submit" value="Submit" class="retro-btn">
        </form>
    </center>

    <center>
        <div id="messages">
            <!-- Messages will be displayed here -->
        </div>
    </center>

    <!-- Initialize Firebase -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js";
      
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyA-m-KcbjUB3TQnMY3WfimJ8-TkNmSik00",
        authDomain: "blog-d7401.firebaseapp.com",
        projectId: "blog-d7401",
        storageBucket: "blog-d7401.appspot.com",
        messagingSenderId: "860631594502",
        appId: "1:860631594502:web:febfe89706d410f0143587",
        measurementId: "G-0RVMMB3QJ0"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Adding a new message to Firestore
      document.getElementById('guestbookForm').addEventListener('submit', async function(e) {
          e.preventDefault();
          const username = document.getElementById('username').value;
          const messageText = document.getElementById('message').value;
          await addDoc(collection(db, 'guestbook'), {
              username: username,
              message: messageText,
              timestamp: new Date()
          });
          document.getElementById('username').value = '';
          document.getElementById('message').value = '';
      });

// Reading messages from Firestore
async function loadMessages() {
    const querySnapshot = await getDocs(collection(db, 'guestbook'));
    const messagesDiv = document.getElementById('messages');
    messagesDiv.innerHTML = '';
    querySnapshot.forEach((doc) => {
        const data = doc.data();
        messagesDiv.innerHTML += `<p><strong>${data.username}</strong>: ${data.message}</p>`;
    });
}


      // Initially load messages
      loadMessages();
    </script>
</body>

</html>


    </script>
</body>

</html>
