<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Ali's Blog</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"> <!-- Add retro font -->
    <style>
        body {
            background-color: black;
            background-image: url('stars.gif');
            font-family: "Press Start 2", Times, serif;
            color: #FF33CC;
        }

        .tamanotchi {
            position: fixed;
            bottom: 0;
            right: 0;
            z-index: 1000;
        }

        @keyframes flip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(0deg); }
        }

        .title {
            font-family: 'Press Start 2P', cursive; /* Retro font */
            font-size: 2rem;
            color: purple;
            animation: flip 4s infinite; /* Flip animation */
        }

    </style>
</head>

<body>
    <center>
        <div class="title">Ali's Blog</div> <!-- Updated title with flip effect -->
    </center>
    <hr>
    <!-- Navigation Buttons -->
    <center>
        <a href="index.html" class="retro-btn">Home</a>
        <a href="#" class="retro-btn">About</a>
        <a href="#" class="retro-btn">Contact</a>
        <a href="guestbook.html" class="retro-btn">Guestbook</a>
        <a href="blog_post.html" class="retro-btn">Blog Post</a>
    </center>
<br>    

<br>

</html>

<body>

<center>
    <form id="guestbookForm">
        <input type="text" id="username" placeholder="Your Name"><br>
        <textarea id="message" rows="4" cols="50" placeholder="Write your message here"></textarea><br>
        <input type="submit" value="Submit" class="retro-btn">
    </form>
    <div id="messages">
        <!-- Messages will appear here -->
    </div>
</center>

    <!-- Initialize Firebase -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js";
      
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyA-m-KcbjUB3TQnMY3WfimJ8-TkNmSik00",
        authDomain: "blog-d7401.firebaseapp.com",
        projectId: "blog-d7401",
        storageBucket: "blog-d7401.appspot.com",
        messagingSenderId: "860631594502",
        appId: "1:860631594502:web:febfe89706d410f0143587",
        measurementId: "G-0RVMMB3QJ0"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

// Adding a new message to Firestore
document.getElementById('guestbookForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const messageText = document.getElementById('message').value;
    const timestamp = new Date();
    await addDoc(collection(db, 'guestbook'), {
        username: username,
        message: messageText,
        timestamp: timestamp.toISOString()  // Store as an ISO string
    });
    document.getElementById('username').value = '';
    document.getElementById('message').value = '';
});


// Reading messages from Firestore
async function loadMessages() {
    const querySnapshot = await getDocs(collection(db, 'guestbook'));
    const messagesDiv = document.getElementById('messages');
    messagesDiv.innerHTML = '';
    querySnapshot.forEach((doc) => {
        const data = doc.data();
        const timestamp = new Date(data.timestamp).toLocaleString();  // Convert ISO string to local date and time
        messagesDiv.innerHTML += `<p><strong>${data.username}</strong> (${timestamp}): ${data.message}</p>`;
    });
}



      // Initially load messages
      loadMessages();
    </script>
</body>

</html>


    </script>
</body>

</html>
