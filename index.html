<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ali's World</title>

  <style>
    :root{
      /* tweak these if you want different neons later */
      --neon-blue:   #00e5ff;
      --neon-green:  #39ff14;
      --neon-yellow: #ffff33;
      --neon-purple: #8f00ff;

      --ink:         #00ffea;          /* base text */
      --panel-bg: linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)), url("BACK1.jpg");  /* content panel */
      --sidebar-a:   #0d0022;           /* stripe A */
      --sidebar-b:   #12002e;           /* stripe B */
      --marquee-bg:  #001a4d;
    }

/* === Ithaca webfont === */
@font-face{
  font-family: "IthacaLVB";
  src:
    url("Ithaca.woff2") format("woff2"),
    url("Ithaca.woff")  format("woff");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}
    
html, body {
  margin: 0;
  padding: 0;
  background-image: url('stars.gif');
  background-repeat: repeat;
  color: var(--ink);
  font-family: "Comic Sans MS", "Courier New", "MS Sans Serif", monospace;
  image-rendering: pixelated;
  cursor: crosshair;
}

/* put the color pop on the page box instead */
.page {
  filter: contrast(115%) saturate(125%);
}


    .page {
      width: 760px;
      margin: 18px auto 32px;
      position: relative;
      left: 7px; /* tiny off-center nudge */
      border: 6px ridge var(--neon-blue);
      outline: 4px solid #00131a;
      background: var(--panel-bg);
      box-shadow: 0 0 40px var(--neon-blue), inset 0 0 6px #000;
z-index: 1;
    }

/* Title: crisp Y2K green, centered, subtle glow */
#glitter-title{
  font-family: "Arial Rounded MT Bold","Helvetica Rounded","VAG Rounded",
               "Trebuchet MS","Verdana","Comic Sans MS",system-ui,sans-serif;
  font-weight: 800;
  font-size: clamp(40px, 7vw, 84px);
  line-height: 1.05;
  letter-spacing: 1px;
  text-align: center;
  margin: 8px 0 6px;
  color: #fff; /* fallback if inline colors fail */
  text-shadow: 0 1px 0 rgba(255,255,255,.30), 0 0 8px rgba(0,0,0,.45);
  position: relative;            /* anchor gifs */
  padding-inline: 120px;         /* reserves space so gifs stay inside */
}
@media (max-width: 560px){
  #glitter-title{ padding-inline: 80px; font-size: clamp(32px, 8vw, 60px); }
}



    .marquee-wrap {
      margin: 10px 20px;
      border: 6px groove var(--neon-blue);
      background: var(--marquee-bg);
    }
    .marquee-wrap.small { margin: 6px 20px 14px; border-width: 4px; }
    marquee { color: var(--neon-yellow); font-weight: bold; font-size: 18px; }

    .layout { width: 100%; border-collapse: collapse; }
    .sidebar {
      width: 210px;
      background: repeating-linear-gradient(135deg, var(--sidebar-a) 0 12px, var(--sidebar-b) 12px 24px);
      border-right: 6px ridge var(--neon-purple);
      vertical-align: top;
    }
    .content {
      padding: 10px 14px 20px;
      vertical-align: top;
      background: rgba(15,0,20,0.45);
      border-left: 4px solid #21003a;
    }

    .nav a {
      display: block;
      margin: 10px 6px;
      padding: 6px 8px;
      border: 3px outset #6af7ff;
      background: #0e0e33;
      color: #a7ffff;
      text-decoration: none;
      text-align: left;
      text-transform: uppercase;
      text-shadow: 0 0 4px var(--neon-blue);
      box-shadow: 2px 2px 0 #000;
    }
    .nav a:hover {
      border-style: inset;
      color: var(--neon-green);
      background: #140043;
      transform: translate(1px,1px);
    }
    .nav-icon {
      vertical-align: middle;
      width: 26px;
      height: 26px;
      margin-right: 6px;
      image-rendering: pixelated;
    }

    .post {
      margin: 14px 0 28px;
      padding: 10px 10px 14px;
      border: 4px groove var(--neon-purple);
      background: rgba(20,0,30,0.62);
    }
    .post h3 {
      margin: 0 0 6px 0;
      color: var(--neon-purple);
      text-shadow: 0 0 6px var(--neon-purple);
    }
    .post .meta { font-size: 12px; color: var(--neon-yellow); }

    hr.retro {
      height: 12px; border: 0; margin: 10px 0 14px;
      background-image: repeating-linear-gradient(
        90deg,
        #ff0000 0 14px,
        #ffa500 14px 28px,
        #ffff00 28px 42px,
        #00cc00 42px 56px,
        #00aaff 56px 70px,
        #0000ff 70px 84px,
        #8000ff 84px 98px
      );
    }

    .blink { animation: blink 0.9s steps(1,end) infinite; }
    @keyframes blink { 50% { opacity: 0; } }

    .footer { padding: 8px; text-align: center; color: #fff; }

    /* Let the rainbow bar host the cat */
hr.retro {
  position: relative;
  overflow: visible;   /* so the cat can start off-screen */
}

/* target the FIRST rainbow bar in the main content */
.content > hr.retro:first-of-type {
  position: relative;
  overflow: visible;        /* let the cat start off-screen */
}

/* bigger cat, above the bar, slower run */
.content > hr.retro:first-of-type::after {
  content: "";
  position: absolute;
  left: -64px;              /* start just off the left edge */
  top: -60px;               /* place ABOVE the bar; tweak this */
  width: 160px;              /* cat size — increase for larger */
  height: 160px;
  background: url("kitty.gif?v=10") center / contain no-repeat;
  image-rendering: pixelated;
  animation: kitty-rail 12s linear infinite;  /* increase seconds = slower */
  pointer-events: none;
  z-index: 9;
}

@keyframes kitty-rail {
  from { left: -64px; }
  to   { left: 100%; }      /* runs across the same bar */
}


@keyframes kitty-on-rail {
  from { left: -48px; }
  to   { left: 100%; }                  /* run across the existing bar */
}


/* bottom button strip */
.button-strip {
  margin: 8px 20px 12px;
  padding: 10px;
  border: 4px groove var(--neon-blue);
  background: rgba(10, 0, 25, 0.6);
  display: flex;
  flex-wrap: wrap;
  gap: 10px 12px;
  justify-content: center;
  align-items: center;
}

.button-strip img {
  height: 31px;                 /* bump to 40px if you want bigger badges */
  image-rendering: pixelated;
  display: block;
}



/* sidebar sticker wall */
.sticker-wall{
  margin: 10px 8px 14px;
  padding: 8px;
  border: 3px inset #6af7ff;
  background: rgba(0,0,0,0.35);
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  justify-items: center;
  align-items: center;
  position: relative;
}
.sticker-wall img{
  width: 88px;          /* classic button size; scales different gifs uniformly */
  height: auto;
  image-rendering: pixelated;
  display: block;
}
.sticker-wall img:hover{
  transform: translateY(-1px);
  filter: drop-shadow(0 0 6px var(--neon-green));
}
.sticker-wall .wide{
  grid-column: span 2;  /* let a wide one span the row */
  width: 188px;
}

  /* gifs flanking the site title */
/* Centered title, space reserved for gifs */
#glitter-title{
  text-align:center;
  padding-inline:120px;         /* room for the gifs */
  margin:12px auto 0;
  color: var(--neon-green);
  text-shadow: 0 1px 0 rgba(255,255,255,.35), 0 0 4px rgba(57,255,20,.55);
  position: relative;           /* anchor for gifs */
}

/* gifs INSIDE the title box */
#glitter-title::before,
#glitter-title::after{
  content:"";
  position:absolute; top:50%;
  width:100px; height:64px;
  transform: translateY(-50%);  /* no horizontal shove */
  background: center/contain no-repeat;
  image-rendering: pixelated;
  filter: drop-shadow(0 0 4px var(--neon-blue));
  pointer-events:none;
}
#glitter-title::before{ left:12px;  background-image:url("kirby.gif?v=1"); }
#glitter-title::after { right:12px; background-image:url("kirby.gif?v=1"); }

/* keep the wiggle without moving outside */
#glitter-title:hover::before{ transform: translateY(-50%) rotate(-3deg); }
#glitter-title:hover::after { transform: translateY(-50%) rotate(3deg); }

@media (max-width:560px){
  #glitter-title{ padding-inline:80px; }
  #glitter-title::before,#glitter-title::after{ width:72px; height:46px; }
}








  .hyperspace::before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:9999;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.25), transparent 60%),
    repeating-linear-gradient(90deg, rgba(0,255,255,.35) 0 3px, transparent 3px 8px);
  animation: warp 600ms ease-in-out;
}
@keyframes warp{
  0% { opacity:0; transform: scaleX(1) }
  40%{ opacity:1; transform: scaleX(1.8) }
  100%{ opacity:0; transform: scaleX(1) }
}

.vhs::after{
  content:""; position:fixed; inset:0; z-index:9999; pointer-events:none;
  background:
    linear-gradient(#000,transparent 12%,#0000 88%,#000),
    repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0 2px, transparent 2px 4px);
  animation: vhs 240ms steps(2,end);
}
@keyframes vhs { from{ opacity:0 } to{ opacity:1 } }

    @keyframes flybyL { 0%{ transform:translate(-120%, -10px) rotate(8deg) }
  70%{ transform:translate(10%, 4px) rotate(-6deg) } 100%{ transform:none } }
@keyframes flybyR { 0%{ transform:translate(120%, 10px) rotate(-8deg) }
  70%{ transform:translate(-10%, -6px) rotate(6deg) } 100%{ transform:none } }

/* trigger class you can add via JS */
.flyby #glitter-title::before { animation: flybyL 1.6s ease-out; }
.flyby #glitter-title::after  { animation: flybyR 1.6s ease-out; }


:root.morning { --neon-blue:#00e5ff; --neon-purple:#00b2ff; }
:root.night   { --neon-blue:#39a0ff; --neon-purple:#8f00ff; }

    .sound-toggle{
  margin: 6px auto 12px; display:block;
  background:#0e0e33; color:#a7ffff;
  border:2px outset #6af7ff; padding:6px 10px;
  font-family: inherit; cursor: pointer; box-shadow: 2px 2px 0 #000;
}
.sound-toggle[aria-pressed="true"]{ border-style: inset; color: var(--neon-green); }


.sticker-controls{
  display:flex; gap:8px; justify-content:center; margin:6px 0 10px;
}
.sticker-controls button{
  padding:6px 10px; border:2px outset #6af7ff; background:#0e0e33; color:#a7ffff;
  font-family:inherit; cursor:pointer; box-shadow:2px 2px 0 #000;
}
.sticker-controls button:active{ border-style: inset; color:var(--neon-green); }

.sticker-wall img{ transition: transform 120ms ease; }   /* keep your existing rule, add this line */
@keyframes pop { 50% { transform: scale(1.08) } }
.sticker-wall.shuffled img{ animation: pop 180ms; }


/* homepage-embedded chat */
.chat-frame {
  width: 100%;
  height: 720px;         /* tweak to taste */
  border: 4px groove var(--neon-blue);
  background: #000;
}
@media (max-width: 800px){
  .chat-frame { height: 85vh; }
}

/* inline warning banner */
.warnline{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  color: var(--neon-yellow);
  font-weight: bold;
  text-shadow: 0 0 4px #000, 0 0 8px var(--neon-purple);
}
.warn-ico{
  width: 28px;           /* tweak size */
  height: 28px;
  image-rendering: pixelated;
  display: inline-block;
  filter: drop-shadow(0 0 6px var(--neon-blue));
}

    /* === ALT NEOCITY UPGRADE PACK === */

/* Nebula canvas sits under .page but above the tiled stars.gif */
#neoNebula {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: 0;                    /* off until alt skin toggled */
  transition: opacity .35s ease;
  mix-blend-mode: screen;
}

/* Floating control bar */
#neoBar {
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 10000;
  display: flex;
  gap: 8px;
  padding: 6px 8px;
  border: 3px ridge var(--neon-blue);
  background: rgba(0,0,0,.55);
  box-shadow: 0 10px 24px rgba(0,0,0,.6);
  font-family: inherit;
}
#neoBar button {
  cursor: pointer;
  background: #0e0e33;
  color: #a7ffff;
  border: 2px outset #6af7ff;
  padding: 6px 10px;
  image-rendering: pixelated;
}
#neoBar button:active { border-style: inset; color: var(--neon-green); }

/* When the alt skin is active… */
html[data-skin="neo"] #neoNebula { opacity: .9; }

html[data-skin="neo"] .page {
  position: relative;
  z-index: 1;
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(0,255,221,.10), transparent 60%),
    radial-gradient(1200px 700px at 120% 120%, rgba(255,0,200,.08), transparent 60%),
    var(--panel-bg);
  border-image: conic-gradient(
    from 0.25turn,
    #00e5ff 0 10%, #8f00ff 10% 20%, #39ff14 20% 30%, #ffff33 30% 40%,
    #00e5ff 40% 50%, #8f00ff 50% 60%, #39ff14 60% 70%, #ffff33 70% 80%,
    #00e5ff 80% 100%
  ) 8;
  outline-color: #050a16;
  box-shadow:
    0 0 40px rgba(0,238,255,.35),
    0 0 120px rgba(143,0,255,.25) inset,
    0 0 10px #000 inset;
}

/* Holographic title sheen */
html[data-skin="neo"] #glitter-title {
  background: conic-gradient(
    from 0.25turn,
    #e6ffff 0%,
    #7df 12%,
    #0ff 22%,
    #9f7 35%,
    #ff9 48%,
    #f8f 64%,
    #c8f 78%,
    #e6ffff 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 6px #fff, 0 0 18px rgba(0,255,255,.55);
  position: relative;
  overflow: visible;
}
html[data-skin="neo"] #glitter-title::after {
  content: "";
  position: absolute;
  left: -5%;
  top: 0;
  width: 20%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.65), transparent);
  transform: skewX(-20deg);
  filter: blur(1px);
  animation: neoSheen 3.8s linear infinite;
}
@keyframes neoSheen { from { left: -25% } to { left: 110% } }

/* Animate the rainbow bar */
html[data-skin="neo"] hr.retro {
  background-size: 700px 100%;
  animation: slidebar 18s linear infinite;
}
@keyframes slidebar {
  from { background-position: 0 0 }
  to   { background-position: 700px 0 }
}

/* Subtle hover glitch on posts */
html[data-skin="neo"] .post {
  position: relative;
  overflow: hidden;
  transition: filter .2s ease;
}
html[data-skin="neo"] .post:hover {
  filter: hue-rotate(10deg) saturate(140%);
}
html[data-skin="neo"] .post::after {
  content: "";
  position: absolute; inset: 0;
  background:
    repeating-linear-gradient(180deg, rgba(255,255,255,.03) 0 2px, transparent 2px 4px);
  opacity: .0;
  transition: opacity .2s ease;
  pointer-events: none;
}
html[data-skin="neo"] .post:hover::after { opacity: .25; }
    
/* CRT scanlines toggle on the whole page */
/* CRT overlay that works even with body filters */
body[data-crt="on"]::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2147483647;
  background:
    linear-gradient(transparent 96%, rgba(0,0,0,.35)),
    repeating-linear-gradient(0deg, rgba(255,255,255,.05) 0 2px, rgba(0,0,0,0) 2px 4px);
  mix-blend-mode: multiply;
}


/* Cursor sparkles */
.neo-sparkle {
  position: fixed; width: 9px; height: 9px; pointer-events: none;
  background: radial-gradient(circle at 50% 50%, #fff, #fff0 70%);
  box-shadow:
    0 0 6px var(--neon-blue),
    0 0 14px var(--neon-purple);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
  transition: transform .6s ease-out, opacity .6s ease-out;
  z-index: 10000;
}
@media (prefers-reduced-motion: reduce) {
  #neoNebula { display: none; }
  .neo-sparkle { display: none; }
}


    /* Neon grid and soft glow behind everything when alt skin is on */
html[data-skin="neo"] body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 5000;
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(0,255,221,.08), transparent 60%),
    radial-gradient(1200px 700px at 120% 120%, rgba(255,0,200,.06), transparent 60%),
    linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px);
  background-size: auto, auto, 40px 40px, 40px 40px;
  background-position: 0 0, 0 0, 0 0, 0 0;
  opacity: .55;
  animation: gridDrift 40s linear infinite;
}
@keyframes gridDrift {
  to { background-position: 0 0, 0 0, 1000px 0, 0 1000px; }
}

/* Page gets a subtle 3D tilt in alt skin */
html[data-skin="neo"] .page {
  will-change: transform;
  transform-style: preserve-3d;
}

/* Louder nav hover in alt skin */
html[data-skin="neo"] .nav a:hover {
  box-shadow: 0 0 18px rgba(0,238,255,.6), 0 0 36px rgba(143,0,255,.4);
  text-shadow: 0 0 6px var(--neon-blue), 0 0 14px var(--neon-purple);
}


/* === Status Cafe: speaker + speech bubble === */
.status-say {
  display: grid;
  grid-template-columns: 72px 1fr;
  gap: 10px;
  align-items: start;
  margin: 10px 8px 14px;
  padding: 8px;
  border: 3px inset #6af7ff;
  background: rgba(0,0,0,0.35);
}

.status-avatar {
  width: 72px; height: 72px;
  border: 3px outset #6af7ff;
  background: #0e0e33;
  box-shadow: 2px 2px 0 #000;
  overflow: hidden;
}
.status-avatar img {
  width: 100%; height: 100%;
  object-fit: cover;
  image-rendering: pixelated;
}

.status-bubble {
  position: relative;
  padding: 8px 10px;
  border: 4px groove var(--neon-purple);
  background:
    radial-gradient(circle at 20% 0%, rgba(255,255,255,0.06), transparent 40%),
    rgba(20,0,30,0.70);
  color: var(--ink);
  box-shadow: 0 0 10px rgba(143,0,255,0.35) inset;
}
.status-bubble::after {
  /* tail pointing from bubble to avatar */
  content: "";
  position: absolute;
  left: -12px; top: 18px;
  width: 0; height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-right: 12px solid rgba(20,0,30,0.70);
  filter: drop-shadow(0 0 2px rgba(143,0,255,0.6));
}

/* Style the official embed’s nodes */
#statuscafe-username {
  margin: 0 0 6px 0;
  font-size: 13px;
  color: var(--neon-yellow);
}
#statuscafe-username a {
  color: var(--neon-blue);
  text-decoration: none;
  text-shadow: 0 0 4px var(--neon-blue);
}
#statuscafe-content {
  margin: 0;
  font-size: 14px;
  line-height: 1.35;
  white-space: pre-wrap; /* keep line breaks from feed */
}

/* Subtle pop when new content arrives */
.status-bubble.pop { animation: say-pop 260ms ease-out; }
@keyframes say-pop {
  0% { transform: scale(0.98); box-shadow: 0 0 0 rgba(143,0,255,0) inset; }
  100%{ transform: scale(1);    box-shadow: 0 0 10px rgba(143,0,255,0.35) inset; }
}


    /* === Dancing Cat mascot === */
#dancecat {
  position: fixed;
  right: 14px;
  bottom: 12px;
  width: min(28vmin, 260px);  /* large, but scales with viewport */
  height: auto;
  z-index: 12000;
  image-rendering: pixelated;
  filter: drop-shadow(0 0 10px rgba(0,0,0,.65));
  transition: transform .15s ease, opacity .2s ease;
  animation: cat-bob 2.2s ease-in-out infinite;
  cursor: grab;
}
#dancecat:active { cursor: grabbing; }
#dancecat.snooze { opacity: .25; }

@keyframes cat-bob {
  0%,100% { transform: translateY(0) }
  50%     { transform: translateY(-6px) }
}

@media (prefers-reduced-motion: reduce) {
  #dancecat { animation: none; }
}

/* neon glow when your alt skin is on */
html[data-skin="neo"] #dancecat {
  filter:
    drop-shadow(0 0 10px var(--neon-blue))
    drop-shadow(0 0 22px rgba(143,0,255,.5));
}


    /* Shared mascot base */
#dancecat, #spinguy {
  position: fixed;
  width: min(28vmin, 260px);
  height: auto;
  z-index: 12000;
  image-rendering: pixelated;
  filter: drop-shadow(0 0 10px rgba(0,0,0,.65));
  transition: transform .15s ease, opacity .2s ease;
  cursor: grab;
}
#dancecat:active, #spinguy:active { cursor: grabbing; }
#dancecat.snooze, #spinguy.snooze { opacity: .25; }

/* Individual defaults */
#dancecat { right: 14px; bottom: 12px; animation: cat-bob 2.2s ease-in-out infinite; }
#spinguy  { left: 14px;  bottom: 12px; animation: spin 6s linear infinite; }

@keyframes cat-bob { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-6px) } }
@keyframes spin    { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }

@media (prefers-reduced-motion: reduce) {
  #dancecat, #spinguy { animation: none; }
}

/* Extra glow in alt skin */
html[data-skin="neo"] #dancecat,
html[data-skin="neo"] #spinguy {
  filter:
    drop-shadow(0 0 10px var(--neon-blue))
    drop-shadow(0 0 22px rgba(143,0,255,.5));
}



    /* 3D background canvas under .page, above stars.gif */
#threebg {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;     /* don't block clicks */
}

/* make sure your content sits above it */
.page { position: relative; z-index: 1; }

    /* full-viewport canvas that survives iOS Chrome/Safari bars */
#threebg{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100svh;           /* dynamic mobile viewport height */
  z-index: 0;
  pointer-events: none;
}
@supports not (height: 100svh) {
  #threebg{ height: 100vh; } /* fallback */
}

/* let the page scale down on phones so you still see the background */
@media (max-width: 860px){
  .page{
    width: min(96vw, 760px);
    margin: 12px auto 24px;
  }
  .layout{ display: block; }
  .sidebar{
    width: auto;
    border-right: 0;
    border-bottom: 6px ridge var(--neon-purple);
  }
}

/* help browsers choose the right baseline sizes */
html, body{ height: 100%; }

/* reduce accidental zoom on taps without blocking accessibility zoom */
body{ touch-action: manipulation; }

/* Y2K rainbow headline + hello.gif layout */
.welcome-flex{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;                 /* drops the gif underneath on narrow screens */
  margin: 0 0 6px 0;
}

/* Smaller rainbow headline */
/* Rainbow headline — stays inside the post */
.y2k-welcome{
  margin: 6px 0 10px;
  font-weight: 700;
  font-size: clamp(26px, 3.4vw, 42px);   /* smaller cap */
  line-height: 1.05;
  letter-spacing: .5px;
  max-width: 100%;
  text-wrap: balance;                     /* nicer multi-line wrap */
  overflow-wrap: anywhere;                /* allow breaks even with colored spans */
  white-space: normal;                    /* IMPORTANT: let it wrap */
  padding-right: 8px;                     /* keeps the glow off the border */
  font-family:
    "Arial Rounded MT Bold", "Helvetica Rounded", "VAG Rounded",
    "Trebuchet MS", "Verdana", "Comic Sans MS", system-ui, sans-serif;
  text-shadow:
    0 1px 0 rgba(255,255,255,.85),
    0 8px 10px rgba(0,0,0,.28);
}



/* Make the hello.gif a touch smaller too */
.hello-gif{
  width: clamp(110px, 18vw, 220px);
  height: auto;
  image-rendering: pixelated;
  filter: drop-shadow(0 0 6px var(--neon-blue));
  flex: 0 0 auto;
}


@media (max-width: 560px){
  .hello-gif{ width: clamp(120px, 36vw, 220px); }
}


  
  </style>
</head>
<body>

  <canvas id="threebg" aria-hidden="true"></canvas>

  <canvas id="neoNebula" aria-hidden="true"></canvas>
<div id="neoBar" role="toolbar" aria-label="Neo controls">
  <button id="neoAltBtn"    type="button">ALT SKIN</button>
  <button id="neoCRTBtn"    type="button">CRT</button>
  <button id="neoMotionBtn" type="button">MOTION</button>
</div>
  
  <div class="page">
<h1 id="glitter-title" class="pastel-title">
  <span style="color:#FFA3A3">A</span><span style="color:#FFDAA3">l</span><span style="color:#EDFFA3">i</span><span style="color:#B6FFA3">'</span><span style="color:#A3FFC8">s</span>
  <span style="color:#A3FFFF">W</span><span style="color:#A3C8FF">o</span><span style="color:#B6A3FF">r</span><span style="color:#EDA3FF">l</span><span style="color:#FFA3DA">d</span>
</h1>
    <div class="marquee-wrap">
      <marquee behavior="alternate" scrollamount="6">
        ★ cool people zone ★ best viewed on desktop ★
      </marquee>
    </div>

    <table class="layout">
      <tr>
        <td class="sidebar">
          <div class="nav">
            <a href="index.html"><img src="cutehome.gif" alt="Home" class="nav-icon">Home</a>
            <a href="about.html"><img src="about.gif" alt="About" class="nav-icon">About</a>
            <a href="blog_posts.html"><img src="post.gif" alt="Entries" class="nav-icon">Entries</a>
<a href="#chat-room"><img src="chattt.gif" alt="Chat" class="nav-icon">Chat</a>
            <a href="coolsite.html"><img src="coollinks.gif" alt="Kool Webpages" class="nav-icon">Kool Webpages</a>
            <a href="guestbook.html"><img src="book-0037.gif" alt="Guestbook" class="nav-icon">Guestbook</a>
            <a href="books.html"><img src="catread.gif" alt="Kool Books" class="nav-icon">Kool Books</a>
            <a href="oudsimulator.html">Oud Simulator</a>
            <a href="contact.html"><img src="phone.gif" alt="Contact" class="nav-icon">Contact</a>
          </div>

          <div style="text-align:center; padding:10px">
            <span style="font-size:12px; color:var(--neon-yellow)">You are visitor #</span>
            <span id="hitCount" style="display:inline-block; padding:4px 8px; border:3px inset #0aa; background:#000; color:#00ff00; font-family:'Courier New', monospace; letter-spacing:2px;">000001</span>
          </div>

<div style="padding: 0 10px 12px; color:#fff; font-size:12px">
  <div>
    <a href="https://catofminerva.com/contact.html">Email Me</a>
  </div>
  <div style="margin-top:6px">
    <a href="https://catofminerva.com/guestbook.html">Sign my Guestbook</a>
  </div>
  <div style="margin-top:6px">
    Last updated: <span id="lastUpdated">sometime in 1999</span>
  </div>
</div>

          <div class="sticker-wall">
  <img src="arabic.gif" alt="Arabic">
  <img src="qatar.gif" alt="Qatar">
  <img src="pali.gif" alt="Palestine">
  <img src="sleepycat.gif" alt="Sleepy cat">
  <img src="peta.gif" alt="PETA">
  <img src="fist.gif" alt="Fist">
  <img src="freespeechonline.gif" alt="Free Speech Online">
  <img src="scifi.gif" alt="Sci-Fi" class="wide">
<img src="pals.png" alt="Sci-Fi" class="wide">
<img src="intifada.gif" alt="Sci-Fi" class="wide">
</div>

          <div class="sticker-controls">
  <button id="shuffleStickers">Shuffle</button>
  <button id="resetStickers"   title="Put them back how they were">Reset</button>
</div>

<!-- Status Cafe speaking widget -->
<div class="status-say">
  <a class="status-avatar" href="https://status.cafe/users/catofminerva" target="_blank" rel="noopener">
    <img src="meme.gif" alt="speaker" loading="lazy" onerror="this.src='sleepycat.gif'">
  </a>

  <div class="status-bubble">
    <!-- official embed, unchanged -->
    <div id="statuscafe">
      <div id="statuscafe-username"></div>
      <div id="statuscafe-content">loading…</div>
    </div>
  </div>
</div>

<script src="https://status.cafe/current-status.js?name=catofminerva" defer></script>

          
        </td>

        <td class="content">
          <hr class="retro">

          <div class="post">
<div class="welcome-flex">
  <h3 class="y2k-welcome">
    <span style="color:#FF0000">w</span><span style="color:#FF5100">e</span><span style="color:#FFA100">l</span><span style="color:#FFF200">c</span><span style="color:#BCFF00">o</span><span style="color:#6BFF00">m</span><span style="color:#1BFF00">e</span>
    <span style="color:#00FF36">t</span><span style="color:#00FF86">o</span>
    <span style="color:#00FFD7">m</span><span style="color:#00D7FF">y</span>
    <span style="color:#0086FF">w</span><span style="color:#0036FF">e</span><span style="color:#1B00FF">b</span><span style="color:#6B00FF">s</span><span style="color:#BC00FF">p</span><span style="color:#FF00F2">a</span><span style="color:#FF00A1">c</span><span style="color:#FF0051">e</span>
    <!-- keep your blinking ! if you want -->
    <!-- <span class="blink" style="color:#fff">!</span> -->
  </h3>
  <img src="hello.gif" alt="hello" class="hello-gif" loading="lazy">
</div>

            <div class="meta">1999 ·</div>
<p class="warnline">
  <img src="warning.gif" alt="Warning" class="warn-ico">
  <span>WARNING: THIS SITE IS NOT OPTIMISED FOR MOBILE VIEW!!</span>
  <img src="warning.gif" alt="" class="warn-ico" aria-hidden="true">
</p>
            <p>hi...still figuring this out lol</p>
            <p>&nbsp;</p>
            <p>i’ve been messing with the html and it kinda works?? don’t click around too much yet coz half the links are broken ;-)</p>
            <br>
            <p>chat room is up now (!!!) but if it crashes it’s probly just my server being moody again haha.</p>
            <p>&nbsp;</p>
            <p>i’m gonna add more posts when i finish typing them out from my notebook (yeah i still write stuff on paper in big 2025 :')).</p>
          </div>

          <div class="post">
            <h3>Pet and feed Zaki</h3>
            <div class="meta">Virtual pet</div>
            <iframe width="314" height="321" scrolling="no" src="https://gifypet.neocities.org/pet/pet.html?name=Zaki&amp;dob=1698667285&amp;gender=b&amp;element=Fire&amp;pet=cat.gif&amp;map=night.gif&amp;background=https%3A%2F%2Fmedia.giphy.com%2Fmedia%2FFlodpfQUBSp20%2Fgiphy.gif&amp;tablecolor=%23000000&amp;textcolor=%238700e0" frameborder="0"></iframe>
          </div>

          <div class="marquee-wrap small">
            <marquee scrollamount="4" direction="right">
              under construction ★ if the page looks weird blame netscape ★ ring me on icq 12345678
            </marquee>
          </div>

          <hr class="retro">
          <div class="post" id="chat-room">
  <h3>Live Chat</h3>
  <div class="meta">web chat · room=lobby</div>
<iframe class="chat-frame"
        src="chat.html?room=lobby&embed=1&v=2"
        title="Ali’s Web Chat"
        loading="lazy"
        referrerpolicy="no-referrer"></iframe>

</div>

        </td>
      </tr>
    </table>

    <div class="button-strip" aria-label="buttons">
  <img src="icc.gif" alt="ICC">
  <img src="dp.gif" alt="DP">
  <img src="anarchynow.jpeg" alt="Anarchy Now">
  <img src="freespeech.gif" alt="Free Speech">
  <img src="privacy.gif" alt="Privacy">
  <img src="piracy.png" alt="Piracy">
<img src="hamsters.gif" alt="Piracy">
      <img src="sucks.gif" alt="Piracy">
      <img src="riversea.gif" alt="Piracy">
      <img src="notfriendlytomobile.gif" alt="Piracy">
            <img src="crypto.png" alt="Piracy">
      <img src="bestviewed.gif" alt="Piracy">
  <img src="pirates.gif" alt="Piracy">


  
</div>

    <div class="footer">
      <marquee scrollamount="3" direction="right">© 1999–2000 Ali's Blog — Part of the Galactic Webring · <a href="#" onclick="alert('Prev page broken'); return false;">Prev</a> | <a href="#" onclick="alert('Next page loading...'); return false;">Next</a></marquee>
    </div>
  <audio id="blip" preload="auto">
  <source src="kawaii%208bit.mp3" type="audio/mpeg">
</audio>
    <button id="soundToggle" class="sound-toggle" aria-pressed="false" title="Toggle UI sounds">🔇 sound</button>
  </div>


  <script>
/* hit counter */
(() => {
  try {
    const key = 'geocities_hit_counter';
    const n = (parseInt(localStorage.getItem(key) || '0', 10) + 1);
    localStorage.setItem(key, n);
    document.getElementById('hitCount').textContent = String(n).padStart(6,'0');
  } catch(e){}
})();

/* last updated label */
document.getElementById('lastUpdated').textContent = document.lastModified || '1999-08-01';

/* tiny nav misalignment */
(() => {
  const links = document.querySelectorAll('.nav a');
  links.forEach(a => {
    const ml = 6 + Math.floor(Math.random()*7);
    const fs = 12 + Math.floor(Math.random()*3);
    a.style.marginLeft = ml + 'px';
    a.style.fontSize   = fs + 'px';
    if (Math.random() < 0.4) a.style.letterSpacing = '1px';
  });
})();




/* Konami hyperspace: up up down down left right left right B A */
(() => {
  const seq = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
  let buf = [];
  document.addEventListener('keydown', e => {
    buf.push(e.key.length===1 ? e.key.toLowerCase() : e.key);
    buf = buf.slice(-seq.length);
    if (seq.every((k,i)=>k===buf[i])) {
      document.documentElement.classList.add('hyperspace');
      setTimeout(() => document.documentElement.classList.remove('hyperspace'), 650);
    }
  });
})();

/* VHS page transition on internal links */
(() => {
  document.querySelectorAll('.page a[href]').forEach(a => {
    const url = a.getAttribute('href') || '';
    if (url.startsWith('#') || /^(https?:)?\/\//i.test(url)) return;
    a.addEventListener('click', e => {
      e.preventDefault();
      document.documentElement.classList.add('vhs');
      setTimeout(() => { window.location.href = url; }, 200);
    });
  });
})();

/* periodic title flyby for the gifs flanking */
setInterval(() => {
  document.documentElement.classList.add('flyby');
  setTimeout(() => document.documentElement.classList.remove('flyby'), 1700);
}, 14000);

/* time-of-day palette */
(() => {
  const h = new Date().getHours();
  document.documentElement.classList.add((h>=6 && h<17) ? 'morning' : 'night');
})();

/* UI sounds: opt-in with button; play on click (pointerdown) */
(() => {
  const a = document.getElementById('blip');
  const btn = document.getElementById('soundToggle');
  if (!a || !btn) return;

  // Ensure the audio element has a concrete src, even if only <source> was provided
  if (!a.currentSrc) { a.src = 'kawaii%208bit.mp3'; a.load(); }

  let enabled = false;
  a.volume = 0.5;

  btn.addEventListener('click', () => {
    enabled = !enabled;
    btn.setAttribute('aria-pressed', String(enabled));
    btn.textContent = enabled ? '🔊 sound' : '🔇 sound';
    // prime audio without making noise
    try { a.play().then(() => { a.pause(); a.currentTime = 0; }).catch(()=>{}); } catch(_){}
  });

  const beep = () => {
    if (!enabled) return;
    try { a.currentTime = 0; a.play(); } catch(_){}
  };

  // fire on pointerdown so it plays before navigation
  document.querySelectorAll('.nav a').forEach(el => {
    el.addEventListener('pointerdown', beep);
    el.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') beep();
    });
  });

  // give the beep a hair more time before the VHS transition navigates
  const links = document.querySelectorAll('.page a[href]');
  links.forEach(aTag => {
    const url = aTag.getAttribute('href') || '';
    if (url.startsWith('#') || /^(https?:)?\/\//i.test(url)) return;
    aTag.addEventListener('click', e => {
      e.preventDefault();
      document.documentElement.classList.add('vhs');
      setTimeout(() => { window.location.href = url; }, 350); // was 200
    });
  });
})();


  /* Sticker shuffle with visible buttons; remembers order */
(() => {
  const wall = document.querySelector('.sticker-wall');
  if (!wall) return;

  const key = 'sticker_order_v1';
  const imgs = Array.from(wall.querySelectorAll('img'));
  const idOf = img => img.getAttribute('src') || img.alt;

  // Save the original order once
  const original = imgs.map(idOf);

  function apply(order){
    const map = new Map(imgs.map(img => [idOf(img), img]));
    order.forEach(id => { const img = map.get(id); if (img) wall.appendChild(img); });
  }

  // Load saved order if present
  try {
    const saved = JSON.parse(localStorage.getItem(key) || 'null');
    if (Array.isArray(saved) && saved.length) apply(saved);
  } catch(_) {}

  function shuffle(){
    const order = Array.from(wall.querySelectorAll('img')).map(idOf);
    for (let i = order.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [order[i], order[j]] = [order[j], order[i]];
    }
    apply(order);
    localStorage.setItem(key, JSON.stringify(order));
    wall.classList.add('shuffled'); setTimeout(()=>wall.classList.remove('shuffled'), 220);
  }

  function reset(){
    apply(original);
    localStorage.setItem(key, JSON.stringify(original));
  }

  document.getElementById('shuffleStickers')?.addEventListener('click', shuffle);
  document.getElementById('resetStickers')?.addEventListener('click', reset);
})();





/* === NEO FINAL — single source of truth for alt skin, CRT, motion, sparkles === */

(() => {
  const root  = document.documentElement;
  const STORE = 'neo_prefs_v2';

  // Load prefs or seed them
  const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
  function load(){ try{ return JSON.parse(localStorage.getItem(STORE)||'{}'); }catch(_){ return {}; } }
  function save(s){ localStorage.setItem(STORE, JSON.stringify(s)); }
  let state = load();
  if (state.motion == null) state.motion = !prefersReduced; // animate by default unless OS says reduce
  if (state.skin   == null) state.skin   = false;           // alt skin off by default
  if (state.crt    == null) state.crt    = false;

  // Ensure helpers exist
  let canvas = document.getElementById('neoNebula');
  if (!canvas) { canvas = document.createElement('canvas'); canvas.id = 'neoNebula'; document.body.prepend(canvas); }
  let bar = document.getElementById('neoBar');
  if (!bar) {
    bar = document.createElement('div'); bar.id = 'neoBar';
    bar.innerHTML = `<button id="neoAltBtn" type="button">ALT SKIN</button>
                     <button id="neoCRTBtn" type="button">CRT</button>
                     <button id="neoMotionBtn" type="button">MOTION</button>`;
    document.body.appendChild(bar);
  }
  const altBtn = document.getElementById('neoAltBtn');
  const crtBtn = document.getElementById('neoCRTBtn');
  const motBtn = document.getElementById('neoMotionBtn');

  // Canvas starfield + aurora (cleaner than bubbles)
  const ctx = canvas.getContext('2d');
  let DPR = Math.max(1, window.devicePixelRatio || 1);
  function fit(){
    DPR = Math.max(1, window.devicePixelRatio || 1);
    canvas.width  = Math.floor(innerWidth * DPR);
    canvas.height = Math.floor(innerHeight * DPR);
    canvas.style.width  = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
  }
  fit(); addEventListener('resize', fit);

  const layers = [];
  function initStars(){
    layers.length = 0;
    const counts = [80, 120, 200], speeds = [0.06, 0.12, 0.24], sizes = [0.6, 1.0, 1.4];
    for (let i=0;i<3;i++){
      const arr = [];
      for (let j=0;j<counts[i];j++){
        arr.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          r: (sizes[i]*DPR) * (0.6 + Math.random()*0.8),
          a: 0.4 + Math.random()*0.6,
          tw: 0.5 + Math.random()*1.0,
          ph: Math.random()*Math.PI*2,
          sp: speeds[i]*DPR*(0.7 + Math.random()*0.6),
          hue: 200 + Math.random()*100
        });
      }
      layers.push(arr);
    }
  }
  initStars();

  function aurora(){
    const g1 = ctx.createRadialGradient(canvas.width*0.2, canvas.height*0.1, 0, canvas.width*0.2, canvas.height*0.1, canvas.height*0.9);
    g1.addColorStop(0, 'rgba(120,220,255,.08)'); g1.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = g1; ctx.fillRect(0,0,canvas.width,canvas.height);
    const g2 = ctx.createRadialGradient(canvas.width*0.85, canvas.height*0.8, 0, canvas.width*0.85, canvas.height*0.8, canvas.height*0.9);
    g2.addColorStop(0, 'rgba(220,120,255,.06)'); g2.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = g2; ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  function render(){
    if (!state.skin){ ctx.clearRect(0,0,canvas.width,canvas.height); requestAnimationFrame(render); return; }
    ctx.clearRect(0,0,canvas.width,canvas.height);
    aurora();
    for (const arr of layers){
      for (const s of arr){
        if (state.motion){
          s.y -= s.sp;
          if (s.y < -2) s.y = canvas.height + 2;
          s.ph += 0.02*s.tw;
        }
        const twinkle = 0.6 + 0.4*Math.sin(s.ph);
        ctx.globalAlpha = s.a * twinkle;
        ctx.fillStyle = `hsl(${s.hue}, 90%, 85%)`;
        ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
      }
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);

  // Sparkles that keep working after scroll (outside iframes)
  let sparkleRoot = document.getElementById('neoSparkles');
  if (!sparkleRoot){
    sparkleRoot = document.createElement('div');
    sparkleRoot.id = 'neoSparkles';
    sparkleRoot.style.position = 'fixed';
    sparkleRoot.style.inset = '0';
    sparkleRoot.style.pointerEvents = 'none';
    sparkleRoot.style.zIndex = '100000';
    document.body.appendChild(sparkleRoot);
  }
  let last = 0, lastX = innerWidth/2, lastY = innerHeight/2;
  function sparkle(ev){
    if (!state.skin || !state.motion) return;
    const x = ('clientX' in ev) ? ev.clientX : lastX;
    const y = ('clientY' in ev) ? ev.clientY : lastY;
    lastX = x; lastY = y;

    const now = performance.now();
    if (now - last < 16) return; last = now;

    const d = document.createElement('div');
    d.className = 'neo-sparkle';
    d.style.left = x + 'px';
    d.style.top  = y + 'px';
    sparkleRoot.appendChild(d);
    requestAnimationFrame(()=>{ d.style.transform='translate(-50%,-50%) scale(0.2)'; d.style.opacity='0'; });
    setTimeout(()=> d.remove(), 700);
  }
  // Use window-level listeners so they continue after scroll; iframes cannot dispatch to parent
  window.addEventListener('pointermove', sparkle, {passive:true});
  window.addEventListener('mousemove', sparkle, {passive:true});
  window.addEventListener('wheel', () => sparkle({clientX:lastX, clientY:lastY}), {passive:true});

  // Subtle 3D tilt on the page in alt skin
  const page = document.querySelector('.page');
  function tilt(ev){
    if (!page || !state.skin) { if(page) page.style.transform='none'; return; }
    if (!state.motion) { page.style.transform='none'; return; }
    const rx = ((ev.clientY / innerHeight) - 0.5) * -6; // degrees
    const ry = ((ev.clientX / innerWidth)  - 0.5) *  6;
    page.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
  }
  window.addEventListener('pointermove', tilt, {passive:true});

  // Apply prefs to DOM and buttons
  function apply(){
    root.dataset.skin = state.skin ? 'neo' : '';
    root.dataset.crt  = state.crt  ? 'on'  : '';
    document.body.dataset.crt = root.dataset.crt; // for the CRT CSS
    if (altBtn) altBtn.textContent = state.skin   ? 'ALT SKIN: ON' : 'ALT SKIN: OFF';
    if (crtBtn) crtBtn.textContent = state.crt    ? 'CRT: ON'      : 'CRT: OFF';
    if (motBtn) motBtn.textContent = state.motion ? 'MOTION: ON'   : 'MOTION: OFF';
    if (!state.skin && page) page.style.transform = 'none';
  }
  apply();

  // Wire controls
  bar.addEventListener('click', (e) => {
    const id = e.target && e.target.id;
    if (id === 'neoAltBtn')    { state.skin   = !state.skin;   apply(); save(state); }
    if (id === 'neoCRTBtn')    { state.crt    = !state.crt;    apply(); save(state); }
    if (id === 'neoMotionBtn') { state.motion = !state.motion; apply(); save(state); }
  });
})();



/* Make the username a link and “pop” the bubble when the feed updates */
window.addEventListener('load', () => {
  const u = document.getElementById('statuscafe-username');
  if (u && u.textContent.trim()) {
    const name = u.textContent.trim();
    u.innerHTML = `<a href="https://status.cafe/users/catofminerva" target="_blank" rel="noopener">@${name}</a>`;
  }
  const bubble = document.querySelector('.status-bubble');
  const content = document.getElementById('statuscafe-content');
  if (bubble && content) {
    const obs = new MutationObserver(() => {
      bubble.classList.add('pop');
      setTimeout(() => bubble.classList.remove('pop'), 280);
    });
    obs.observe(content, { childList: true, characterData: true, subtree: true });
  }
});

  window.addEventListener('load', () => {
  const u = document.getElementById('statuscafe-username');
  if (u && u.textContent.trim() && !u.querySelector('a')) {
    const name = u.textContent.trim();
    u.innerHTML = `<a href="https://status.cafe/users/catofminerva" target="_blank" rel="noopener">@${name}</a>`;
  }
  const bubble = document.querySelector('.status-bubble');
  const content = document.getElementById('statuscafe-content');
  if (bubble && content) {
    new MutationObserver(() => {
      bubble.classList.add('pop');
      setTimeout(() => bubble.classList.remove('pop'), 280);
    }).observe(content, { childList: true, characterData: true, subtree: true });
  }
});




(() => {
  const cat = document.getElementById('dancecat');
  if (!cat) return;

  const KEY = 'dancecat_pos_v1';

  // default: fixed to bottom-right
  function resetToCorner() {
    cat.style.right = '14px';
    cat.style.bottom = '12px';
    cat.style.left = 'auto';
    cat.style.top = 'auto';
    try { localStorage.removeItem(KEY); } catch(_) {}
  }

  // try to restore, but clamp to viewport; if absurd, reset
  function restore() {
    let pos = null;
    try { pos = JSON.parse(localStorage.getItem(KEY) || 'null'); } catch(_){}
    if (!pos || typeof pos.x !== 'number' || typeof pos.y !== 'number') {
      resetToCorner(); return;
    }
    const rect = cat.getBoundingClientRect();
    const maxX = Math.max(0, innerWidth  - rect.width);
    const maxY = Math.max(0, innerHeight - rect.height);

    // clamp
    const x = Math.min(Math.max(0, pos.x), maxX);
    const y = Math.min(Math.max(0, pos.y), maxY);

    // if clamping changed anything a lot (old doc-anchored coords), drop them
    if (Math.abs(x - pos.x) > 100 || Math.abs(y - pos.y) > 100) {
      resetToCorner(); return;
    }
    cat.style.left = x + 'px';
    cat.style.top  = y + 'px';
    cat.style.right = 'auto';
    cat.style.bottom = 'auto';
  }

  // drag to move
  let dragging = false, offX = 0, offY = 0;
  cat.addEventListener('pointerdown', e => {
    dragging = true;
    const r = cat.getBoundingClientRect();
    offX = e.clientX - r.left;
    offY = e.clientY - r.top;
    cat.setPointerCapture?.(e.pointerId);
  });
  window.addEventListener('pointermove', e => {
    if (!dragging) return;
    const r = cat.getBoundingClientRect();
    const w = r.width, h = r.height;
    const x = Math.max(0, Math.min(innerWidth  - w, e.clientX - offX));
    const y = Math.max(0, Math.min(innerHeight - h, e.clientY - offY));
    cat.style.left = x + 'px';
    cat.style.top  = y + 'px';
    cat.style.right = 'auto';
    cat.style.bottom = 'auto';
  }, {passive:true});
  window.addEventListener('pointerup', e => {
    if (!dragging) return;
    dragging = false;
    cat.releasePointerCapture?.(e.pointerId);
    const r = cat.getBoundingClientRect();
    try { localStorage.setItem(KEY, JSON.stringify({ x: r.left, y: r.top })); } catch(_){}
  });

  // handy reset: Shift + double-click
  cat.addEventListener('dblclick', e => {
    if (e.shiftKey) resetToCorner();
    else cat.classList.toggle('snooze');
  });

  // first layout, then restore
  window.requestAnimationFrame(restore);
})();


  (() => {
  // Viewport-anchored fixed elements need body without a filter.
  // You already moved your filter onto .page, so we're good.

  function wireMascot(id, corner) {
    const el = document.getElementById(id);
    if (!el) return;

    const KEY = 'mascot_' + id + '_pos_v1';

    function setCorner(c) {
      el.style.top = el.style.left = el.style.right = el.style.bottom = 'auto';
      if (c.includes('bottom')) el.style.bottom = '12px'; else el.style.top = '12px';
      if (c.includes('right'))  el.style.right  = '14px'; else el.style.left = '14px';
    }

    function clampToViewport(x, y) {
      const r = el.getBoundingClientRect();
      const maxX = Math.max(0, innerWidth  - r.width);
      const maxY = Math.max(0, innerHeight - r.height);
      return { x: Math.min(Math.max(0, x), maxX), y: Math.min(Math.max(0, y), maxY) };
    }

    function reset() {
      setCorner(corner);
      try { localStorage.removeItem(KEY); } catch(_) {}
    }

    function restore() {
      let pos = null;
      try { pos = JSON.parse(localStorage.getItem(KEY) || 'null'); } catch(_) {}
      if (!pos || typeof pos.x !== 'number' || typeof pos.y !== 'number') { reset(); return; }
      const clamped = clampToViewport(pos.x, pos.y);
      if (Math.abs(clamped.x - pos.x) > 100 || Math.abs(clamped.y - pos.y) > 100) { reset(); return; }
      el.style.left = clamped.x + 'px';
      el.style.top  = clamped.y + 'px';
      el.style.right = el.style.bottom = 'auto';
    }

    // Dragging
    let dragging = false, offX = 0, offY = 0;
    el.addEventListener('pointerdown', e => {
      dragging = true;
      const r = el.getBoundingClientRect();
      offX = e.clientX - r.left;
      offY = e.clientY - r.top;
      el.setPointerCapture?.(e.pointerId);
    });
    window.addEventListener('pointermove', e => {
      if (!dragging) return;
      const r = el.getBoundingClientRect();
      const pos = clampToViewport(e.clientX - offX, e.clientY - offY);
      el.style.left = pos.x + 'px';
      el.style.top  = pos.y + 'px';
      el.style.right = el.style.bottom = 'auto';
    }, { passive: true });
    window.addEventListener('pointerup', e => {
      if (!dragging) return;
      dragging = false;
      el.releasePointerCapture?.(e.pointerId);
      const r = el.getBoundingClientRect();
      try { localStorage.setItem(KEY, JSON.stringify({ x: r.left, y: r.top })); } catch(_) {}
    });

    // Double-click to snooze; Shift + double-click to reset to corner
    el.addEventListener('dblclick', e => {
      if (e.shiftKey) reset();
      else el.classList.toggle('snooze');
    });

    // Keep inside viewport on resize
    window.addEventListener('resize', () => {
      const r = el.getBoundingClientRect();
      const pos = clampToViewport(r.left, r.top);
      el.style.left = pos.x + 'px';
      el.style.top  = pos.y + 'px';
    }, { passive: true });

    // First layout, then restore
    requestAnimationFrame(restore);
  }

  wireMascot('dancecat', 'bottom-right');
  wireMascot('spinguy',  'bottom-left');
})();
</script>



<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script>
(() => {
  try {
    const prefersReduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
    let motion = !prefersReduce;
    try {
      const s = JSON.parse(localStorage.getItem('neo_prefs_v2')||'{}');
      if (typeof s.motion === 'boolean') motion = s.motion;
    } catch(_){}

    const canvas = document.getElementById('threebg');
    if (!canvas) { console.error('[valley] #threebg not found'); return; }

    const renderer = new THREE.WebGLRenderer({ canvas, antialias:false, alpha:false });
    renderer.setPixelRatio(1);
    canvas.style.imageRendering = 'pixelated';

    const scene = new THREE.Scene();
    const SKY = 0xb36af0;
    scene.fog = new THREE.Fog(SKY, 18, 140);

    const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 400);
    function fit(){
      const w = innerWidth, h = innerHeight;
      renderer.setSize(w, h, false);
      camera.aspect = w/h;
      camera.updateProjectionMatrix();
    }
    fit(); addEventListener('resize', fit, {passive:true});
    if (visualViewport){
      visualViewport.addEventListener('resize', fit, {passive:true});
      visualViewport.addEventListener('scroll',  fit, {passive:true});
    }
    camera.position.set(0, 3.0, 12);

    scene.add(new THREE.HemisphereLight(0xffe6ff, 0x221533, 0.8));
    const sun = new THREE.DirectionalLight(0xffffff, 0.9); sun.position.set(-2.5, 4.5, 1.5);
    scene.add(sun);

    // Skydome gradient
    {
      const g = new THREE.SphereGeometry(220, 16, 12);
      const m = new THREE.ShaderMaterial({
        side: THREE.BackSide,
        uniforms: {
          top: { value: new THREE.Color(0xffaeea) },
          bottom: { value: new THREE.Color(0x6c33d6) }
        },
        vertexShader: `
          varying float vY;
          void main(){
            vY = normalize(modelMatrix * vec4(position,1.0)).y * 0.5 + 0.5;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
          }`,
        fragmentShader: `
          uniform vec3 top; uniform vec3 bottom; varying float vY;
          void main(){ gl_FragColor = vec4(mix(bottom, top, pow(vY, 1.4)), 1.0); }`
      });
      scene.add(new THREE.Mesh(g, m));
    }

    // World params
    const WORLD_W = 120, TILE = 120, SX = 96, SZ = 96;

    function fnoise(x,z){
      return (
        Math.sin(x*0.25 + z*0.33) +
        Math.sin(x*0.61 - z*0.47) +
        Math.sin(x*1.70 + z*1.30)
      ) / 3;
    }

    // Height function with Math.pow to avoid ** precedence traps
    function hfun(x,z){
      const nx = x / WORLD_W;
      const left  = 5.0 * Math.exp(-Math.pow(((nx + 0.38)/0.22), 2));
      const right = 5.0 * Math.exp(-Math.pow(((nx - 0.38)/0.22), 2));
      const carve = -2.1 * Math.exp(-Math.pow((nx/0.26), 2)) - 0.42 + 0.22*Math.sin(z*0.06);
      const bumps = 0.9 * fnoise(x*0.8, z*0.8) + 0.35 * fnoise(x*1.7, z*1.3);
      return left + right + carve + bumps;
    }

    function colorFor(h, minH, maxH){
      const t = Math.min(1, Math.max(0, (h - minH) / (maxH - minH + 1e-6)));
      const stops = [
        { t:0.00, c:0x21e34c }, { t:0.35, c:0x77ff59 },
        { t:0.55, c:0xeaff6a }, { t:0.75, c:0xffa433 }, { t:1.00, c:0xffd7ab }
      ];
      let a=stops[0], b=stops[stops.length-1];
      for (let i=1;i<stops.length;i++){ if (t <= stops[i].t){ a=stops[i-1]; b=stops[i]; break; } }
      const u = (t - a.t) / Math.max(1e-6, b.t - a.t);
      return new THREE.Color(a.c).lerp(new THREE.Color(b.c), u);
    }

    function makeLand(zoff){
      const geo = new THREE.PlaneGeometry(WORLD_W, TILE, SX, SZ);
      geo.rotateX(-Math.PI/2);
      const pos = geo.attributes.position;
      let min=1e9, max=-1e9;
      for (let i=0;i<pos.count;i++){
        const x = pos.getX(i);
        const zAbs = pos.getZ(i) + zoff - TILE*0.5;
        const h = hfun(x, zAbs);
        pos.setY(i, h);
        if (h<min) min=h; if (h>max) max=h;
      }
      const cols = new Float32Array(pos.count*3);
      for (let i=0;i<pos.count;i++){
        const c = colorFor(pos.getY(i), min, max);
        cols[i*3] = c.r; cols[i*3+1] = c.g; cols[i*3+2] = c.b;
      }
      geo.setAttribute('color', new THREE.BufferAttribute(cols,3));
      geo.computeVertexNormals();
      const mat = new THREE.MeshLambertMaterial({ vertexColors:true, flatShading:true, dithering:true });
      const m = new THREE.Mesh(geo, mat);
      m.position.z = zoff - TILE*0.5;
      m.userData.kind = 'land';
      return m;
    }

    function makeRiver(zoff){
      const width = 16, sx=64, sz=80;
      const geo = new THREE.PlaneGeometry(width, TILE, sx, sz);
      geo.rotateX(-Math.PI/2);
      const pos = geo.attributes.position;
      for (let i=0;i<pos.count;i++){
        const x = pos.getX(i);
        const zAbs = pos.getZ(i) + zoff - TILE*0.5;
        const base = hfun(x, zAbs);
        pos.setY(i, base + 0.12);
      }
      geo.computeVertexNormals();
      const mat = new THREE.MeshPhongMaterial({ color:0x1c46ff, emissive:0x0a155f, shininess:70, flatShading:true });
      const m = new THREE.Mesh(geo, mat);
      m.position.z = zoff - TILE*0.5;
      m.userData.kind = 'river';
      m.userData.pos = pos;
      return m;
    }

    const landA = makeLand(0), landB = makeLand(TILE);
    const rivA  = makeRiver(0),  rivB  = makeRiver(TILE);
    scene.add(landA, landB, rivA, rivB);

    const clock = new THREE.Clock();
    const SPEED = 2.1;
    let mx=0, my=0;
    addEventListener('pointermove', e => {
      mx = (e.clientX/innerWidth  - 0.5);
      my = (e.clientY/innerHeight - 0.5);
    }, { passive:true });

    function recycle(mesh, other){
      if (mesh.position.z > TILE*0.5){
        mesh.position.z = other.position.z - TILE;
        if (mesh.userData.kind === 'land'){
          const pos = mesh.geometry.attributes.position;
          let min=1e9, max=-1e9;
          for (let i=0;i<pos.count;i++){
            const x = pos.getX(i);
            const zAbs = pos.getZ(i) + mesh.position.z + TILE*0.5;
            const h = hfun(x, zAbs);
            pos.setY(i, h);
            if (h<min) min=h; if (h>max) max=h;
          }
          const cols = mesh.geometry.getAttribute('color');
          for (let i=0;i<pos.count;i++){
            const c = colorFor(pos.getY(i), min, max);
            cols.setXYZ(i, c.r, c.g, c.b);
          }
          pos.needsUpdate = true; cols.needsUpdate = true;
          mesh.geometry.computeVertexNormals();
        } else {
          const pos = mesh.userData.pos;
          for (let i=0;i<pos.count;i++){
            const x = pos.getX(i);
            const zLocal = pos.getZ(i);
            const zAbs = zLocal + mesh.position.z + TILE*0.5;
            const base = hfun(x, zAbs);
            pos.setY(i, base + 0.12);
          }
          pos.needsUpdate = true;
          mesh.geometry.computeVertexNormals();
        }
      }
    }

    function animate(){
      const dt = clock.getDelta();
      camera.position.y = 3.0 + Math.sin(performance.now()*0.001)*0.08;
      camera.lookAt(0, 1.5, -20);
      camera.rotation.y += mx*0.02;
      camera.rotation.x += -my*0.01;

      const dz = motion ? SPEED*dt : 0;
      landA.position.z += dz; landB.position.z += dz;
      rivA.position.z  += dz; rivB.position.z  += dz;

      recycle(landA, landB); recycle(landB, landA);
      recycle(rivA,  rivB ); recycle(rivB,  rivA );

      if (motion){
        [rivA, rivB].forEach(m => {
          const p = m.userData.pos, t = performance.now()*0.001;
          for (let i=0;i<p.count;i++){
            const x = p.getX(i), zLocal = p.getZ(i);
            const y = 0.12 + 0.014*Math.sin(x*0.9 + t*2.0) + 0.01*Math.cos(zLocal*1.8 + t*1.2);
            const zAbs = zLocal + m.position.z + TILE*0.5;
            p.setY(i, hfun(x, zAbs) + y);
          }
          p.needsUpdate = true;
          m.geometry.computeVertexNormals();
        });
      }

      renderer.setClearColor(SKY, 1);
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    animate();
  } catch (err) {
    console.error('[valley] fatal error:', err);
  }
})();
</script>










  <!-- 1) Load the library -->
<script src="https://unpkg.com/cursor-effects@latest/dist/browser.js"></script>

<!-- 2) Turn on the ghost cursor -->
<script>
  window.addEventListener('load', () => {
    new cursoreffects.ghostCursor();
  });
</script>




  <img id="dancecat" src="dancingcat.gif" alt="dancing cat" draggable="false">
<img id="spinguy" src="spin.gif" alt="spinning guy" draggable="false">




</body>
</html>
