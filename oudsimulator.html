<!DOCTYPE html>
<html>
<head>
    <title>Ali's Blog - Virtual Oud</title>
    <style>
        /* ==== Global Styles ==== */
        body {
            background: #000066;
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive;
            color: #00FFEE;
        }

        /* ==== Header Styles ==== */
        .title {
            font-size: 48px;
            color: #FF00FF;
            text-shadow: 0 0 10px #00FFFF;
            margin: 20px 0;
            animation: flip 2s infinite;
        }

        @keyframes flip {
            0% { transform: perspective(400px) rotateY(0); }
            50% { transform: perspective(400px) rotateY(180deg); }
            100% { transform: perspective(400px) rotateY(360deg); }
        }

        .kitty-gif {
            border: 3px solid #00FF00;
            padding: 5px;
            background: #000;
            margin: 10px;
        }

        .retro-btn {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background: #0000FF;
            color: #FFFFFF !important;
            border: 3px outset #CCCCCC;
            text-decoration: none;
        }

        .retro-btn:hover {
            background: #FF00FF;
            border-style: inset;
            text-decoration: underline;
        }

        hr {
            height: 3px;
            background: linear-gradient(90deg, 
                #FF0000 0%,
                #FF9900 20%,
                #FFFF00 40%,
                #00FF00 60%,
                #0099FF 80%,
                #6633FF 100%
            );
            border: none;
            margin: 20px 0;
        }

        /* ==== Oud Simulator Styles ==== */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(0deg, 
                rgba(0, 255, 0, 0.1) 0px,
                rgba(0, 255, 0, 0.1) 2px,
                transparent 2px,
                transparent 4px
            );
            pointer-events: none;
            z-index: 999;
        }

        .oud-container {
            border: 3px solid #FF00FF;
            background: #000;
            padding: 20px;
            margin: 20px auto;
            width: 600px;
        }

        .string {
            background: linear-gradient(45deg,
                #FF0000 0%, #FF9900 20%, #FFFF00 40%,
                #00FF00 60%, #0099FF 80%, #6633FF 100%
            );
            width: 4px;
            height: 200px;
            margin: 10px;
            cursor: pointer;
            box-shadow: 0 0 10px #00FFFF;
        }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>
    
    <!-- Blog Header -->
    <header>
        <center>
            <div class="title">Ali's Blog</div>
            <img src="kitty.gif" alt="kitty Gif" class="kitty-gif" style="width: 100px; height: 80px;">
        </center>
        <hr>
        <!-- Navigation -->
        <center>
            <a href="index.html" class="retro-btn nav">Home</a>
            <img src="cutehome.gif" alt="home GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="about.html" class="retro-btn nav">About</a>
            <img src="about.gif" alt="about GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="blog_posts.html" class="retro-btn nav">Entries</a>
            <img src="post.gif" alt="post GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="chat.html" class="retro-btn nav">Chat</a>
            <img src="chattt.gif" alt="chat GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="coolsite.html" class="retro-btn nav">Kool Webpages</a>
            <img src="coollinks.gif" alt="cool GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="guestbook.html" class="retro-btn nav">Guestbook</a>
            <img src="book-0037.gif" alt="Guestbook GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="books.html" class="retro-btn nav">Kool Books</a>
            <img src="catread.gif" alt="reading GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="truthtable.html" class="retro-btn nav">Truth Table</a>
            <img src="math.gif" alt="math GIF" style="vertical-align: middle; width: 30px; height: 30px;">
            <a href="contact.html" class="retro-btn nav">Contact</a>
            <img src="phone.gif" alt="Phone GIF" style="vertical-align: middle; width: 30px; height: 30px;">
        </center>
        <hr>
    </header>

    <!-- Oud Simulator -->
    <div id="splash" style="text-align: center; margin: 50px;">
        <div style="width: 400px; height: 50px; background: url('data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2m+VLNEWyED7T3aLEGFhIBiHwMUghUAqJQAQAOw==') repeat;"></div>
        <marquee behavior="scroll" direction="left" scrollamount="10">
            <h1>VIRTUAL OUD SIMULATOR v1.1</h1>
        </marquee>
        <button onclick="initApp()" style="
            font-size:24px; 
            padding:15px; 
            background:#0000FF; 
            color:#FFFFFF; 
            border:3px outset #CCCCCC;">
            START OUD
        </button>
    </div>

    <div id="main-interface" style="display: none;">
        <div class="oud-container">
            <div style="display: flex; justify-content: center;">
                <div class="string" data-time="0.2-1.0"></div>
                <div class="string" data-time="1.2-2.0"></div>
                <div class="string" data-time="2.2-3.0"></div>
                <div class="string" data-time="3.2-4.0"></div>
                <div class="string" data-time="4.2-5.0"></div>
                <div class="string" data-time="5.2-5.75"></div>
            </div>
            
            <div class="controls">
                <div style="color:#FF00FF; font-size:18px;">
                    <label>VOLUME: </label>
                    <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5">
                </div>
                <div style="color:#00FF00; margin-top:15px;">
                    <label>TUNING: </label>
                    <input type="range" id="tune" min="0.8" max="1.2" step="0.01" value="1">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Audio Setup
        let audioContext;
        let masterBuffer;
        const stringTimes = [
            { start: 0.2, end: 1.0 },
            { start: 1.2, end: 2.0 },
            { start: 2.2, end: 3.0 },
            { start: 3.2, end: 4.0 },
            { start: 4.2, end: 5.0 },
            { start: 5.2, end: 5.75 }
        ];

        async function initApp() {
            try {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('main-interface').style.display = 'block';
                
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                await audioContext.resume();
                
                const response = await fetch('https://upload.wikimedia.org/wikipedia/commons/7/77/Oud_open_Strings.ogg');
                const arrayBuffer = await response.arrayBuffer();
                masterBuffer = await audioContext.decodeAudioData(arrayBuffer);

                document.querySelectorAll('.string').forEach((string, index) => {
                    let currentSource = null;
                    const { start, end } = stringTimes[index];
                    const duration = end - start;

                    string.addEventListener('mousedown', () => {
                        if(currentSource) currentSource.stop();
                        
                        const source = audioContext.createBufferSource();
                        const gainNode = audioContext.createGain();
                        const tune = document.getElementById('tune').value;

                        source.buffer = masterBuffer;
                        source.playbackRate.value = tune;
                        
                        gainNode.gain.setValueAtTime(0.8, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, 
                            audioContext.currentTime + duration * (1/tune));

                        source.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        source.start(0, start, duration);
                        currentSource = source;
                    });

                    string.addEventListener('mouseup', () => currentSource?.stop());
                });

                const volumeControl = document.getElementById('volume');
                const masterGain = audioContext.createGain();
                masterGain.connect(audioContext.destination);
                masterGain.gain.value = volumeControl.value;
                volumeControl.addEventListener('input', () => {
                    masterGain.gain.value = volumeControl.value;
                });

            } catch(error) {
                alert(`ERROR: ${error.message}\nPlease try refreshing!`);
            }
        }
    </script>
</body>
</html>
