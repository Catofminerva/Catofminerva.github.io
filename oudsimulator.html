<!DOCTYPE html>
<html>
<head>
    <title>Tuned Synth Oud</title>
    <style>
        /* ... (keep existing styles unchanged) ... */
    </style>
</head>
<body>
    <button id="start" style="margin: 20px">Click to Initialize Audio</button>
    <!-- ... (keep rest of HTML structure unchanged) ... -->

    <script>
        // Initialize audio context only after user interaction
        let audioContext;
        let initialized = false;

        const startButton = document.getElementById('start');
        startButton.addEventListener('click', async () => {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                await audioContext.resume();
                startButton.textContent = "Audio ready!";
                initialized = true;
                initializeApp();
            } catch (error) {
                startButton.textContent = "Audio failed to start";
                console.error('Audio init error:', error);
            }
        });

        async function initializeApp() {
            const samples = [
                // Updated sample URLs with working CORS headers
                {note: 'C2', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'},
                {note: 'F2', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'},
                {note: 'A2', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'},
                {note: 'D3', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'},
                {note: 'G3', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'},
                {note: 'C4', url: 'https://actions.google.com/sounds/v1/musical_instruments/guitar_pick_pluck.ogg'}
            ];

            // ... (keep rest of the JavaScript code but replace sample URLs) ...
            
            // Add click sound for testing
            document.body.addEventListener('click', () => {
                if (initialized) {
                    const osc = audioContext.createOscillator();
                    osc.connect(audioContext.destination);
                    osc.frequency.value = 440;
                    osc.start();
                    osc.stop(audioContext.currentTime + 0.1);
                }
            });
        }
    </script>
</body>
</html>
